<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.kuaizhan.dao.mapper.UnbindDao">
    <!--添加自动回复-->
    <insert id="insertUnbind">
        insert into weixin_unbind
        set
        weixin_appid=#{weixinAppId},
        unbind_type=#{unbindType},
        status=1,
        <if test="unbindText!=null">
            unbind_text=#{unbindText},
        </if>
        create_time=unix_timestamp(now()),
        update_time=unix_timestamp(now())
    </insert>
    <select id="getUnbindByWeixinAppId" resultType="com.kuaizhan.pojo.DO.UnbindDO">
        select * from weixin_unbind
        where weixin_appid=#{appId}
    </select>
    <update id="updateUnbindByWeixinAppId">
        update weixin_unbind
        set
        <if test="unbindType!=null">
            unbind_type=#{unbindType},
        </if>
        <if test="unbindText!=null">
            unbind_text=#{unbindText},
        </if>
        <if test="status!=null">
            status=#{status},
        </if>
        update_time=unix_timestamp(now())
        where
        weixin_appid=#{weixinAppId}
    </update>
</mapper>